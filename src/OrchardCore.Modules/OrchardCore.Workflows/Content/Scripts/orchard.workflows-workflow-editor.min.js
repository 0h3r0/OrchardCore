var WorkflowEditor=function(){return function(e){jsPlumb.ready(function(){var t=jsPlumb.getInstance({DragOptions:{cursor:"pointer",zIndex:2e3},ConnectionOverlays:[["Arrow",{location:1,visible:!0,width:11,length:11,id:"ARROW",events:{click:function(){alert("you clicked on the arrow overlay")}}}],["Label",{location:.1,id:"label",cssClass:"aLabel",events:{tap:function(){alert("hey")}}}]],Container:e}),n={connector:"StateMachine",paintStyle:{stroke:"red",strokeWidth:4},hoverPaintStyle:{stroke:"blue"},overlays:["Arrow"]};t.registerConnectionType("basic",n);var o={fill:"#216477",stroke:"#216477"},i={endpoint:"Dot",paintStyle:{stroke:"#7AB02C",fill:"transparent",radius:7,strokeWidth:1},isSource:!0,connector:["Flowchart",{stub:[40,60],gap:10,cornerRadius:5,alwaysRespectStubs:!0}],connectorStyle:{strokeWidth:2,stroke:"#61B7CF",joinstyle:"round",outlineStroke:"white",outlineWidth:2},hoverPaintStyle:o,connectorHoverStyle:{strokeWidth:3,stroke:"#216477",outlineWidth:5,outlineStroke:"white"},dragOptions:{},overlays:[["Label",{location:[.5,1.5],label:"Drag",cssClass:"endpointSourceLabel",visible:!1}]]},d={endpoint:"Dot",paintStyle:{fill:"#7AB02C",radius:7},hoverPaintStyle:o,maxConnections:-1,dropOptions:{hoverClass:"hover",activeClass:"active"},isTarget:!0,overlays:[["Label",{location:[.5,-.5],label:"Drop",cssClass:"endpointTargetLabel",visible:!1}]]},r=function(e){e.getOverlay("label").setLabel(e.sourceId.substring(15)+"-"+e.targetId.substring(15))},l=function(e,n,o){for(var r=0;r<n.length;r++){var l=e+n[r];t.addEndpoint("flowchart"+e,i,{anchor:n[r],uuid:l})}for(var a=0;a<o.length;a++){var c=e+o[a];t.addEndpoint("flowchart"+e,d,{anchor:o[a],uuid:c})}};t.batch(function(){l("Window4",["TopCenter","BottomCenter"],["LeftMiddle","RightMiddle"]),l("Window2",["LeftMiddle","BottomCenter"],["TopCenter","RightMiddle"]),l("Window3",["RightMiddle","BottomCenter"],["LeftMiddle","TopCenter"]),l("Window1",["LeftMiddle","RightMiddle"],["TopCenter","BottomCenter"]),t.bind("connection",function(e,t){r(e.connection)}),$(e).find(".window").each(function(){t.draggable(this,{grid:[20,20]})}),t.connect({uuids:["Window2BottomCenter","Window3TopCenter"],editable:!0}),t.connect({uuids:["Window2LeftMiddle","Window4LeftMiddle"],editable:!0}),t.connect({uuids:["Window4TopCenter","Window4RightMiddle"],editable:!0}),t.connect({uuids:["Window3RightMiddle","Window2RightMiddle"],editable:!0}),t.connect({uuids:["Window4BottomCenter","Window1TopCenter"],editable:!0}),t.connect({uuids:["Window3BottomCenter","Window1BottomCenter"],editable:!0}),t.bind("click",function(e,t){e.toggleType("basic")}),t.bind("connectionDrag",function(e){console.log("connection "+e.id+" is being dragged. suspendedElement is ",e.suspendedElement," of type ",e.suspendedElementType)}),t.bind("connectionDragStop",function(e){console.log("connection "+e.id+" was dragged")}),t.bind("connectionMoved",function(e){console.log("connection "+e.connection.id+" was moved")})}),this.jsPlumbInstance=t})}}();$.fn.workflowEditor=function(){new WorkflowEditor(this[0]);return this},$(document).ready(function(){$(".workflow-editor-canvas").workflowEditor()});
