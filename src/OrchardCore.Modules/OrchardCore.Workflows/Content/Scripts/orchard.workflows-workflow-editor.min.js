var WorkflowEditor=function(){return function(e){jsPlumb.ready(function(){var o=jsPlumb.getInstance({DragOptions:{cursor:"pointer",zIndex:2e3},ConnectionOverlays:[["Arrow",{location:1,visible:!0,width:11,length:11}],["Label",{location:.5,id:"label",cssClass:"connection-label"}]],Container:e}),n={strokeWidth:2,stroke:"#999999",joinstyle:"round",outlineStroke:"white",outlineWidth:2},t={strokeWidth:3,stroke:"#216477",outlineWidth:5,outlineStroke:"white"},i={fill:"#216477",stroke:"#216477"},a=function(e){return{endpoint:"Dot",anchor:"Continuous",paintStyle:{stroke:"#7AB02C",fill:"#7AB02C",radius:7,strokeWidth:1},isSource:!0,connector:["Flowchart",{stub:[40,60],gap:0,cornerRadius:5,alwaysRespectStubs:!0}],connectorStyle:n,hoverPaintStyle:i,connectorHoverStyle:t,dragOptions:{},overlays:[["Label",{location:[.5,1.5],label:e,cssClass:"endpointSourceLabel",visible:null!=e}]]}},s=function(e){e.getOverlay("label").setLabel(e.sourceId.substring(15)+"-"+e.targetId.substring(15))};o.batch(function(){o.bind("connection",function(e,o){s(e.connection)});for(var n=0,t={activities:[{id:1,left:50,top:50,outcomes:[{name:"Done",displayName:"Gereed"}]},{id:2,left:500,top:150,outcomes:[{name:"True",displayName:"True"},{name:"False",displayName:"False"}]},{id:3,left:50,top:250,outcomes:[{name:"Done",displayName:"Done"}]},{id:4,left:350,top:250,outcomes:[{name:"Done",displayName:"Done"}]}],connections:[{outcomeName:"Done",sourceId:1,targetId:2},{outcomeName:"True",sourceId:2,targetId:3},{outcomeName:"False",sourceId:2,targetId:4}]}.activities;n<t.length;n++){var i=t[n],r=$('<div class="activity" style="left:'+i.left+"px; top:"+i.top+'px;"></div>'),l=r[0];$(e).append(r),o.draggable(l,{grid:[20,20]}),o.makeTarget(l,{dropOptions:{hoverClass:"hover"},anchor:"Continuous",endpoint:["Blank",{radius:8}]});for(var c=i.outcomes.length>1,d=0,u=i.outcomes;d<u.length;d++){var p=u[d],m=a(c?p.displayName:null);o.addEndpoint(l,m)}}o.bind("click",function(e,n){o.deleteConnection(e)}),o.bind("connectionDrag",function(e){console.log("connection "+e.id+" is being dragged. suspendedElement is ",e.suspendedElement," of type ",e.suspendedElementType)}),o.bind("connectionDragStop",function(e){console.log("connection "+e.id+" was dragged")}),o.bind("connectionMoved",function(e){console.log("connection "+e.connection.id+" was moved")})}),this.jsPlumbInstance=o})}}();$.fn.workflowEditor=function(){new WorkflowEditor(this[0]);return this},$(document).ready(function(){$(".workflow-editor-canvas").workflowEditor()});
