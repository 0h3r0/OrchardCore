var WorkflowEditor=function(){return function(o,n){jsPlumb.ready(function(){var n=jsPlumb.getInstance({DragOptions:{cursor:"pointer",zIndex:2e3},ConnectionOverlays:[["Arrow",{location:1,visible:!0,width:11,length:11}],["Label",{location:.5,id:"label",cssClass:"connection-label"}]],Container:o}),e=function(o){return{endpoint:"Dot",anchor:"Continuous",paintStyle:{stroke:"#7AB02C",fill:"#7AB02C",radius:7,strokeWidth:1},isSource:!0,connector:["Flowchart",{stub:[40,60],gap:0,cornerRadius:5,alwaysRespectStubs:!0}],connectorStyle:{strokeWidth:2,stroke:"#999999",joinstyle:"round",outlineStroke:"white",outlineWidth:2},hoverPaintStyle:{fill:"#216477",stroke:"#216477"},connectorHoverStyle:{strokeWidth:3,stroke:"#216477",outlineWidth:5,outlineStroke:"white"},dragOptions:{},overlays:[["Label",{location:[.5,1.5],label:o,cssClass:"endpointSourceLabel",visible:null!=o}]]}};n.batch(function(){n.bind("connection",function(o,n){!function(o){o.getOverlay("label").setLabel(o.sourceId.substring(15)+"-"+o.targetId.substring(15))}(o.connection)});for(var t=0,i=[{id:1,left:50,top:50,outcomes:[{name:"Done",displayName:"Gereed"}]},{id:2,left:500,top:150,outcomes:[{name:"True",displayName:"True"},{name:"False",displayName:"False"}]},{id:3,left:50,top:250,outcomes:[{name:"Done",displayName:"Done"}]},{id:4,left:350,top:250,outcomes:[{name:"Done",displayName:"Done"}]}];t<i.length;t++){var a=i[t],l=$('<div class="activity" style="left:'+a.left+"px; top:"+a.top+'px;"></div>'),r=l[0];$(o).append(l),n.draggable(r,{grid:[20,20]}),n.makeTarget(r,{dropOptions:{hoverClass:"hover"},anchor:"Continuous",endpoint:["Blank",{radius:8}]});for(var s=a.outcomes.length>1,c=0,d=a.outcomes;c<d.length;c++){var u=d[c],f=e(s?u.displayName:null);n.addEndpoint(r,f)}}n.bind("click",function(o,e){n.deleteConnection(o)}),n.bind("connectionDrag",function(o){console.log("connection "+o.id+" is being dragged. suspendedElement is ",o.suspendedElement," of type ",o.suspendedElementType)}),n.bind("connectionDragStop",function(o){console.log("connection "+o.id+" was dragged")}),n.bind("connectionMoved",function(o){console.log("connection "+o.connection.id+" was moved")})}),this.jsPlumbInstance=n})}}();$.fn.workflowEditor=function(){return this.each(function(o,n){var e=$(n),t=e.data("workflow-definition");e.data("workflowEditor",new WorkflowEditor(n,t))}),this},$(document).ready(function(){$(".workflow-editor-canvas").workflowEditor()});
