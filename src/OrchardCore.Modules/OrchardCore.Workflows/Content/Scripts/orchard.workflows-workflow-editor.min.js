var WorkflowEditor=function(){return function(e){jsPlumb.ready(function(){var n=jsPlumb.getInstance({DragOptions:{cursor:"pointer",zIndex:2e3},ConnectionOverlays:[["Arrow",{location:1,visible:!0,width:11,length:11}],["Label",{location:.1,id:"label",cssClass:"connection-label"}]],Container:e}),o={connector:"StateMachine",paintStyle:{stroke:"red",strokeWidth:4},hoverPaintStyle:{stroke:"blue"},overlays:["Arrow"]};n.registerConnectionType("basic",o);var t={fill:"#216477",stroke:"#216477"},i={endpoint:"Dot",paintStyle:{stroke:"#7AB02C",fill:"#7AB02C",radius:7,strokeWidth:1},isSource:!0,connector:["Flowchart",{stub:[40,60],gap:10,cornerRadius:5,alwaysRespectStubs:!0}],connectorStyle:{strokeWidth:2,stroke:"#61B7CF",joinstyle:"round",outlineStroke:"white",outlineWidth:2},hoverPaintStyle:t,connectorHoverStyle:{strokeWidth:3,stroke:"#216477",outlineWidth:5,outlineStroke:"white"},dragOptions:{},overlays:[["Label",{location:[.5,1.5],label:"Drag",cssClass:"endpointSourceLabel",visible:!1}]]},d=function(e){e.getOverlay("label").setLabel(e.sourceId.substring(15)+"-"+e.targetId.substring(15))},r=function(e,o,t){for(var d=0;d<o.length;d++){var r=e+o[d];n.addEndpoint("flowchart"+e,i,{anchor:o[d],uuid:r})}};n.batch(function(){r("Window4",["TopCenter","BottomCenter"]),r("Window2",["LeftMiddle","BottomCenter"]),r("Window3",["RightMiddle","BottomCenter"]),r("Window1",["LeftMiddle","RightMiddle"]),n.bind("connection",function(e,n){d(e.connection)}),$(e).find(".activity").each(function(){n.draggable(this,{grid:[20,20]}),n.makeTarget(this,{dropOptions:{hoverClass:"hover"},anchor:"Top",endpoint:["Dot",{radius:8}]})}),n.connect({uuids:["Window2BottomCenter","Window3TopCenter"],editable:!0}),n.connect({uuids:["Window2LeftMiddle","Window4LeftMiddle"],editable:!0}),n.connect({uuids:["Window4TopCenter","Window4RightMiddle"],editable:!0}),n.connect({uuids:["Window3RightMiddle","Window2RightMiddle"],editable:!0}),n.connect({uuids:["Window4BottomCenter","Window1TopCenter"],editable:!0}),n.connect({uuids:["Window3BottomCenter","Window1BottomCenter"],editable:!0}),n.bind("click",function(e,o){n.deleteConnection(e)}),n.bind("connectionDrag",function(e){console.log("connection "+e.id+" is being dragged. suspendedElement is ",e.suspendedElement," of type ",e.suspendedElementType)}),n.bind("connectionDragStop",function(e){console.log("connection "+e.id+" was dragged")}),n.bind("connectionMoved",function(e){console.log("connection "+e.connection.id+" was moved")})}),this.jsPlumbInstance=n})}}();$.fn.workflowEditor=function(){new WorkflowEditor(this[0]);return this},$(document).ready(function(){$(".workflow-editor-canvas").workflowEditor()});
